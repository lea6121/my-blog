(this["webpackJsonpmy-blog"]=this["webpackJsonpmy-blog"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c,r,i,a,s,o,j,b,l,d,u,O,p,x,h,f=n(1),m=n(22),g=n.n(m),v=n(4),y=n(5),N=n(10),w=n(2),S=Object(f.createContext)(null),k="token",_=function(e){localStorage.setItem(k,e)},z=function(){return localStorage.getItem(k)},C="https://student-json-api.lidemy.me",q=function(e){return fetch("".concat(C,"/posts?_sort=createdAt&_order=desc&_page=").concat(e,"&_limit=5")).then((function(e){return{totalPosts:e.headers.get("x-total-count"),posts:e.json()}}))},L=function(){var e=z();return fetch("".concat(C,"/me"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))},A=n(3),T=Object(A.b)(c||(c=Object(y.a)(["\nhtml, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  box-sizing: border-box;\n}\naddress, caption, cite, code, dfn, em, strong, th, var, b {\n  font-weight: normal;\n  font-style: normal;\n}\nabbr, acronym {\n  border: 0;\n}\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n  display: block;\n}\n*,\n*::after,\n*::before {\n  margin: 0;\n  padding: 0;\n  box-sizing: inherit;\n}\nhtml {\n  text-size-adjust: 100%;\n  box-sizing: border-box;\n}\nbody {\n    line-height: 1;\n}\nol, ul {\n  list-style: none;\n}\nblockquote, q {\n  quotes: none;\n}\nblockquote {\n  &:before,   &:after {\n    content: '';\n    content: none;\n  }\n}\nq {\n  &:before,   &:after {\n    content: '';\n    content: none;\n  }\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\ncaption, th {\n  text-align: left;\n}\ntextarea {\n  resize: none;\n}\na {\n  text-decoration: none;\n  cursor: pointer;\n}\nbutton {\n  padding: 0;\n  border: none;\n  background: none;\n}\n"]))),P=Object(A.b)(r||(r=Object(y.a)(["\nhtml {\n  box-sizing: border-box;\n  font-size: 62.5%; \n  font-family: 'HelveticaNeue', Helvetica, Arial, 'Lucida Grande', sans-serif;\n}\n"]))),U=n(0),E=A.c.div(i||(i=Object(y.a)(["\n  letter-spacing: 1px;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  background-color: white;\n  justify-content: space-evenly;\n  z-index: 2;\n  border-bottom: 1px solid black;\n"]))),I=Object(A.c)(N.b)(a||(a=Object(y.a)(["\n  font-size: 50px;\n  text-decoration: none;\n  color: #010101;\n"]))),B=A.c.div(s||(s=Object(y.a)(["\n  display: flex;\n  color: #010101;\n"]))),D=Object(A.c)(N.b)(o||(o=Object(y.a)(["\n  border-left: 1px solid black;\n  box-sizing: border-box;\n  padding: 35px 40px 35px 40px;\n  font-size: 20px;\n  text-align: center;\n  color: #010101;\n  display: flex;\n  transition: all 0.2s ease-in;\n  cursor: pointer;\n  text-decoration: none;\n\n  ",";\n"])),(function(e){return e.$active&&"\n    background: rgba(36, 35, 35, 0.9);\n    color: white;\n    "}));function G(){var e=Object(w.g)(),t=Object(w.f)(),n=Object(f.useContext)(S),c=n.user,r=n.setUser;return Object(U.jsxs)(E,{children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),Object(U.jsx)(I,{to:"/",$active:"/"===e.pathname,children:"BLOG"}),Object(U.jsxs)(B,{className:"tags",children:[Object(U.jsx)(D,{to:"/about",$active:"/about"===e.pathname,children:"ABOUT"}),c&&Object(U.jsx)(D,{to:"/new-post",$active:"/new-post"===e.pathname,children:"POST"}),!c&&Object(U.jsx)(D,{to:"/login",$active:"/login"===e.pathname,children:"LOG IN"}),c&&Object(U.jsx)(D,{onClick:function(){_(""),r(null),alert("\u767b\u51fa\u6210\u529f\uff01"),"/"!==e.pathname&&t.push("/")},children:"LOG OUT"}),!c&&Object(U.jsx)(D,{to:"/register",$active:"/register"===e.pathname,children:"SIGN UP"})]})]})}var $=A.c.div(j||(j=Object(y.a)(["\n  width: 80%;\n  margin: 0 auto;\n  padding-top: 100px;\n  position: relative;\n"]))),M=A.c.div(b||(b=Object(y.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 40px 10px;\n  border: 1px solid black;\n  margin: 20px;\n"]))),J=A.c.div(l||(l=Object(y.a)(["\n  padding-bottom: 30px;\n  margin: 0px 18px 15px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),R=Object(A.c)(N.b)(d||(d=Object(y.a)(["\n  font-weight: 600;\n  line-height: 4rem;\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]))),H=A.c.div(u||(u=Object(y.a)(["\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.8);\n"]))),W=A.c.div(O||(O=Object(y.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  margin: 0 18px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  white-space: pre-line;\n  font-size: 19px;\n  line-height: 4rem;\n"]))),F=A.c.div(p||(p=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n"]))),K=Object(A.c)(N.b)(x||(x=Object(y.a)(["\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.7);\n  text-decoration: none;\n  margin: 10px 5px;\n  font-size: 20px;\n  padding: 10px;\n"]))),Q=A.c.div(h||(h=Object(y.a)(["\n  font-size: 16px;\n  color: grey;\n  text-align: center;\n  padding: 0 0 50px;\n"])));function V(e){var t=e.post,n=Object(w.g)();return Object(U.jsxs)(M,{children:[Object(U.jsxs)(J,{children:[Object(U.jsx)(R,{to:"/posts/".concat(t.id),$active:"/article"===n.pathname,children:t.title}),Object(U.jsx)(H,{children:new Date(t.createdAt).toLocaleString()})]}),Object(U.jsx)(W,{children:t.body})]})}function X(){var e=Object(f.useState)([]),t=Object(v.a)(e,2),n=t[0],c=t[1],r=Object(f.useState)(0),i=Object(v.a)(r,2),a=i[0],s=i[1],o=Object(f.useState)(0),j=Object(v.a)(o,2),b=j[0],l=j[1],d=Object(f.useState)(!1),u=Object(v.a)(d,2),O=u[0],p=u[1];Object(f.useEffect)((function(){O||(p(!0),q().then((function(e){return p(!1),s(e.totalPosts),l(1),e.posts})).then((function(e){c(e)})))}),[]);var x=a;function h(e){var t=Number(e.target.innerText);l(t),q(t).then((function(e){return s(e.totalPosts),e.posts})).then((function(e){c(e)}))}function m(){for(var e=Math.ceil(x/5),t=[],n=1;n<=e;n++)t.push(n);return Object(U.jsxs)("div",{children:[Object(U.jsx)(F,{children:t.map((function(e,t){return Object(U.jsx)(K,{onClick:h,children:e},e)}))}),Object(U.jsxs)(Q,{children:["\u7b2c ",b," \u9801 / \u5171 ",e," \u9801"]})]})}return Object(U.jsxs)("div",{children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),O&&Object(U.jsx)(oe,{children:"Loading..."}),Object(U.jsxs)($,{children:[n.map((function(e){return Object(U.jsx)(V,{post:e},e.id)})),Object(U.jsx)(m,{})]})]})}n(41);function Y(){return Object(U.jsxs)("div",{children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),Object(U.jsx)("div",{className:"about-container",children:Object(U.jsxs)("div",{class:"profile",children:[Object(U.jsx)("div",{class:"profile_info",children:"A website offer users post any simple thoughts or news whenever you want. Also, reviewing other users' post."}),Object(U.jsx)("div",{class:"profile_pic"})]})})]})}var Z=n(12),ee=n(11);n(42);function te(){var e=Object(f.useState)({title:"",content:""}),t=Object(v.a)(e,2),n=t[0],c=t[1],r=n.title,i=n.content,a=Object(f.useState)(""),s=Object(v.a)(a,2),o=s[0],j=s[1],b=Object(f.useState)(!1),l=Object(v.a)(b,2),d=l[0],u=l[1],O=Object(w.f)(),p=function(e){c(Object(ee.a)(Object(ee.a)({},n),{},Object(Z.a)({},e.target.name,e.target.value)))};return Object(U.jsxs)("div",{className:"post-wrapper",children:[d&&Object(U.jsx)(oe,{children:"Loading..."}),Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),Object(U.jsx)("div",{className:"post-container",children:Object(U.jsxs)("form",{className:"post-form",onSubmit:function(e){e.preventDefault(),d||(u(!0),function(e,t){var n=z();return console.log(n),fetch("".concat(C,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(n)},body:JSON.stringify({title:e,body:t})}).then((function(e){return e.json()}))}(r,i).then((function(e){if(u(!1),e.code)return j(e.message);e.title&&(alert("\u767c\u4f48\u6587\u7ae0\u6210\u529f\uff01"),O.push("/"))})))},children:[Object(U.jsxs)("div",{className:"post-form__editor",children:[Object(U.jsx)("div",{className:"post-form__title input-group mb-3",children:Object(U.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter the title here...",name:"title",value:r,onChange:p,required:!0})}),Object(U.jsxs)("div",{className:"post-form__content form-floating",children:[Object(U.jsx)("textarea",{className:"form-control",placeholder:"Leave a comment...",name:"content",value:i,onChange:p,required:!0}),Object(U.jsx)("label",{htmlFor:"floatingTextarea2",children:"Leave a comment here..."})]}),Object(U.jsx)("div",{className:"post-form__error",children:o})]}),Object(U.jsx)("div",{className:"post-form__submit",children:Object(U.jsx)("input",{type:"submit",value:"SUBMIT",class:"post-form__submit-btn"})})]})})]})}n(43);function ne(){var e=Object(f.useContext)(S).setUser,t=Object(f.useState)({username:"",password:""}),n=Object(v.a)(t,2),c=n[0],r=n[1],i=c.username,a=c.password,s=function(e){r(Object(ee.a)(Object(ee.a)({},c),{},Object(Z.a)({},e.target.name,e.target.value)))},o=Object(f.useState)(""),j=Object(v.a)(o,2),b=j[0],l=j[1],d=Object(f.useState)(!1),u=Object(v.a)(d,2),O=u[0],p=u[1],x=Object(w.f)();return Object(U.jsxs)("div",{className:"login-wrapper",children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),O&&Object(U.jsx)(oe,{children:"Loading..."}),Object(U.jsx)("div",{className:"login-container",children:Object(U.jsxs)("form",{onSubmit:function(t){t.preventDefault(),O||(p(!0),function(e,t){return fetch("".concat(C,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()}))}(i,a).then((function(t){if(p(!1),0===t.ok)return l(t.message);_(t.token),L().then((function(t){if(1!==t.ok)return _(null),l(t.toString());alert("\u767b\u5165\u6210\u529f\uff01"),e(t.data),x.push("/")}))})))},children:[Object(U.jsxs)("div",{className:"login-form",children:["USERNAME",Object(U.jsx)("br",{}),Object(U.jsx)("input",{className:"login-input",type:"text",name:"username",value:i,onChange:function(e){return s(e)},required:!0}),Object(U.jsx)("br",{})]}),Object(U.jsxs)("div",{className:"login-form",children:["PASSWORD",Object(U.jsx)("br",{}),Object(U.jsx)("input",{className:"login-input",type:"password",name:"password",value:a,onChange:function(e){return s(e)},required:!0}),Object(U.jsx)("br",{}),Object(U.jsx)("span",{children:b})]}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{className:"login-submit",type:"submit",value:"SIGN IN"})})]})})]})}n(44);function ce(){var e=Object(f.useContext)(S).setUser,t=Object(f.useState)({nickname:"",username:"",password:""}),n=Object(v.a)(t,2),c=n[0],r=n[1],i=c.nickname,a=c.username,s=c.password,o=function(e){r(Object(ee.a)(Object(ee.a)({},c),{},Object(Z.a)({},e.target.name,e.target.value)))},j=Object(f.useState)(""),b=Object(v.a)(j,2),l=b[0],d=b[1],u=Object(f.useState)(!1),O=Object(v.a)(u,2),p=O[0],x=O[1],h=Object(w.f)();return Object(U.jsxs)("div",{className:"register-wrapper",children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),p&&Object(U.jsx)(oe,{children:"Loading..."}),Object(U.jsx)("div",{className:"register-container",children:Object(U.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p||(x(!0),function(e,t,n){return fetch("".concat(C,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,username:t,password:n})}).then((function(e){return e.json()}))}(i,a,s).then((function(t){if(x(!1),t.code)return d(t.message);1===t.ok&&_(t.token),L().then((function(t){if(1!==t.ok)return _(null),d(t.toString());alert("\u8a3b\u518a\u6210\u529f\uff01"),e(t.data),h.push("/")}))})))},children:[Object(U.jsxs)("div",{className:"register-form",children:["NICKNAME",Object(U.jsx)("br",{}),Object(U.jsx)("input",{className:"register-input",type:"text",name:"nickname",placeholder:"\u60a8\u7684\u66b1\u7a31",value:i,onChange:function(e){return o(e)},required:!0}),Object(U.jsx)("br",{})]}),Object(U.jsxs)("div",{className:"register-form",children:["USERNAME",Object(U.jsx)("br",{}),Object(U.jsx)("input",{className:"register-input",type:"text",name:"username",placeholder:"\u60a8\u7684\u4f7f\u7528\u8005\u540d\u7a31",value:a,onChange:function(e){return o(e)},required:!0}),Object(U.jsx)("br",{})]}),Object(U.jsxs)("div",{className:"register-form",children:["PASSWORD",Object(U.jsx)("br",{}),Object(U.jsx)("input",{className:"register-input",type:"password",name:"password",placeholder:"\u60a8\u7684\u5bc6\u78bc",value:s,onChange:function(e){return o(e)},required:!0}),Object(U.jsx)("br",{}),Object(U.jsx)("span",{children:l})]}),Object(U.jsx)("div",{children:Object(U.jsx)("input",{className:"register-submit",type:"submit",value:"SUBMIT"})})]})})]})}var re,ie;n(45);function ae(){var e=Object(w.h)(),t=Object(f.useState)([]),n=Object(v.a)(t,2),c=n[0],r=n[1],i=Object(f.useState)(!1),a=Object(v.a)(i,2),s=a[0],o=a[1],j=Object(w.f)();Object(f.useEffect)((function(){var t;s||(o(!0),(t=e.id,fetch("".concat(C,"/posts/").concat(t)).then((function(e){return e.json()}))).then((function(e){o(!1),r(e)})))}),[]);return Object(U.jsxs)("div",{children:[Object(U.jsx)(T,{}),Object(U.jsx)(P,{}),Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"article",children:[s&&Object(U.jsx)(oe,{children:"Loading..."}),Object(U.jsx)("h1",{children:c.title}),Object(U.jsx)("p",{children:new Date(c.createdAt).toLocaleString()}),Object(U.jsx)("div",{className:"article__content",children:c.body}),Object(U.jsx)("button",{type:"button",className:"article__content-btn btn btn-dark",onClick:function(){j.push("/")},children:"\u56de\u6587\u7ae0\u5217\u8868"})]})})]})}var se=A.c.div(re||(re=Object(y.a)(["\n  letter-spacing: 1px;\n  max-width: 100vw;\n  font-family: Baskerville, Georgia, 'Times New Roman', Times, serif;\n"]))),oe=A.c.div(ie||(ie=Object(y.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.7);\n  font-weight: 600;\n  color: white;\n  font-size: 72px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  z-index: 1;\n"])));var je=function(){var e=Object(f.useState)(null),t=Object(v.a)(e,2),n=t[0],c=t[1];return Object(f.useEffect)((function(){z()&&L().then((function(e){e.ok&&c(e.data)}))}),[]),Object(U.jsx)(S.Provider,{value:{user:n,setUser:c},children:Object(U.jsx)(se,{children:Object(U.jsxs)(N.a,{children:[Object(U.jsx)(G,{}),Object(U.jsxs)(w.c,{children:[Object(U.jsx)(w.a,{exact:!0,path:"/",children:Object(U.jsx)(X,{})}),Object(U.jsx)(w.a,{path:"/about",children:Object(U.jsx)(Y,{})}),Object(U.jsx)(w.a,{path:"/new-post",children:Object(U.jsx)(te,{})}),Object(U.jsx)(w.a,{path:"/login",children:Object(U.jsx)(ne,{})}),Object(U.jsx)(w.a,{path:"/register",children:Object(U.jsx)(ce,{})}),Object(U.jsx)(w.a,{path:"/posts/:id",children:Object(U.jsx)(ae,{})})]})]})})})};g.a.render(Object(U.jsx)(A.a,{theme:{colors:{primary_300:"#3333dd",primary_400:"#e33e3e",primary_500:"#af0505"}},children:Object(U.jsx)(je,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.6a649e08.chunk.js.map